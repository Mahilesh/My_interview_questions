# â­ Real Time P2 Incident â€“ AWS ECS Microservice Down (Client Admin Application)

## ğŸ“Œ Situation
A production-critical ECS-based microservice named **Client Admin** (used by a global insurance client) was intermittently unreachable from multiple geographic regions â€” Australia, India, Europe, and later the US â€” following their time-zones.  
Users saw blank webpage / not loading issues.

**Tech Stack Involved:**  
Route53 â†’ CloudFront â†’ ALB â†’ ECS (Fargate)  
WAF | S3 Logs | CloudTrail

---

## ğŸ¯ Task
- Restore service availability urgently (**P2**)
- Identify the root cause since AWS health checks + ECS tasks were healthy

---

## ğŸ” Action
To troubleshoot, I followed a structured approach:

1ï¸âƒ£ **Verified application containers in ECS**  
â†’ Tasks & services healthy, CPU/memory normal  

2ï¸âƒ£ **Checked Application Load Balancer & CloudFront**  
â†’ No 4xx/5xx spikes reported  
â†’ Health checks passing  

3ï¸âƒ£ **Verified DNS (Route53)**  
â†’ Resolutions were correct globally  

4ï¸âƒ£ **Checked CloudTrail for Request ID provided by customer**  
â†’ Found configuration event linked to AWS WAF  

5ï¸âƒ£ **Queried WAF logs stored in S3 using Athena**  
â†’ Discovered requests were blocked by newly added WAF rules  

6ï¸âƒ£ **Confirmed change was made at Organization-level WAF**  
â†’ Rules propagated to all child accounts, causing global outages  

7ï¸âƒ£ **Escalated to Security team**  
â†’ Requested rollback of newly created rule  

---

## âœ… Result (Fix & Outcome)
âœ” Security team removed the new WAF rule  
âœ” Traffic instantly restored across all regions  
âœ” Confirmed by business and customer teams  
âœ” Incident closed after monitoring for 24 hours  

---

## ğŸ” Preventive / Permanent Actions
- Implemented Change Review & Approval for **Org-level WAF** configurations  
- Added Athena dashboards for faster WAF log analysis  
- Configured CloudWatch alerts for WAF block rate anomalies  
- Improved collaboration between Security & DevOps Teams  

---

## ğŸ™ Interview-Ready Closing Line
> â€œThis incident helped me enhance operational visibility into WAF behavior. After this fix, we standardized a WAF rule change governance process to avoid future global outages.â€
